(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{120:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),o=n.n(c),i=n(4),u=n(20),l=n(5),s=n(54),m=function(e){return e.alert},p=n(18),f=n(55),d=n.n(f).a.create({baseURL:"https://goit-phonebook-api.herokuapp.com",timeout:1e4}),b=function(e,t){var n={Authorization:"Bearer ".concat(e)};return{headers:t?Object(p.a)(Object(p.a)({},n),t):n}},h=function(e){return e.session.authenticated},E=function(e){return e.session.token},O=function(e){return e.session.user},v=n(1),g=Object(v.b)("LOGIN/START"),j=Object(v.b)("LOGIN/SUCCESS",(function(e){return{payload:{response:e}}})),_=Object(v.b)("LOGIN/ERROR",(function(e){return{payload:{message:e.message},meta:{error:!0}}})),C=Object(v.b)("SIGNUP/START"),y=Object(v.b)("SIGNUP/SUCCESS",(function(e){return{payload:{response:e}}})),S=Object(v.b)("SIGNUP/ERROR",(function(e){return{payload:{message:e.message},meta:{error:!0}}})),N=Object(v.b)("REFRESHUSER/START"),A=Object(v.b)("REFRESHUSER/SUCCESS",(function(e){return{payload:{user:e}}})),T=Object(v.b)("REFRESHUSER/ERROR",(function(e){return{payload:{message:e.message},meta:{error:!0}}})),x=Object(v.b)("LOGOUT"),R=n(9),L=n(13),w=n(15),k=n(14),U=n(121),D=n(56),F=n.n(D),P=n(57),H=n.n(P),I=n(26),q=n.n(I),B=n(11),G=function(e){return e.contactsList.contacts},z=function(e){var t=e.contactsList.contacts;return t?t.length:0},Q=function(e){return e.contactsList.filter},W=Object(B.a)([G,Q],(function(e,t){return e.length<=1?e:e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))})),M=n(58),Y=function(e){var t=e.title,n=e.children;return r.a.createElement("section",{className:M.titleSection},r.a.createElement("h2",null,t),n)},J=Object(v.b)("LOADCONTACTS/START"),K=Object(v.b)("LOADCONTACTS/SUCCESS",(function(e){return{payload:{contacts:e}}})),X=Object(v.b)("LOADCONTACTS/ERROR",(function(e){return{payload:{message:e.message},meta:{error:!0}}})),$=Object(v.b)("ADDCONTACT/START",(function(e){return{payload:{contact:e},meta:{addContact:!0}}})),V=Object(v.b)("ADDCONTACT/START"),Z=Object(v.b)("ADDCONTACT/SUCCESS",(function(e){return{payload:{contact:e}}})),ee=Object(v.b)("ADDCONTACT/ERROR",(function(e){return{payload:{message:e.message},meta:{error:!0}}})),te=Object(v.b)("DELETECONTACT/START"),ne=Object(v.b)("DELETECONTACT/SUCCESS",(function(e){return{payload:{id:e}}})),ae=Object(v.b)("DELETECONTACT/ERROR",(function(e){return{payload:{message:e.message},meta:{error:!0}}})),re=Object(v.b)("CHANGEFILTER",(function(e){return{payload:{filter:e}}})),ce=n(122),oe=n(22);var ie=function(e){var t=e.name,n=e.number,a=e.onDeleteContact,c=e.index;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",null,c,". ",t)),r.a.createElement("div",{className:oe.wrap},r.a.createElement("p",null,n),r.a.createElement("button",{type:"button",onClick:a,className:oe.button},r.a.createElement("i",{className:"".concat(oe.icon," material-icons")},"close"))))},ue=function(e){var t=e.message;return r.a.createElement("p",null,t,"!")},le=n(59),se=n.n(le),me=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){return Object(R.a)(this,n),t.apply(this,arguments)}return Object(L.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.onLoadContacts)()}},{key:"render",value:function(){var e=this.props,t=e.contacts,n=e.onDeleteContact;return r.a.createElement(r.a.Fragment,null,t.length>0?r.a.createElement(ce.a,{component:"ul",className:oe.list},t.map((function(e,t){var a=e.id,c=e.name,o=e.number;return r.a.createElement(U.a,{key:a,timeout:300,classNames:se.a,unmountOnExit:!0},r.a.createElement("li",{key:a,className:oe.item},r.a.createElement(ie,{index:t+1,name:c,number:o,onDeleteContact:function(){return n(a)}})))}))):r.a.createElement(ue,{message:"Contacts for query not found"}))}}]),n}(a.Component),pe={onDeleteContact:function(e){return function(t,n){var a=E(n());a&&(t(te()),d.delete("".concat("/contacts","/").concat(e),b(a)).then((function(){return t(ne(e))})).catch((function(e){return t(ae(e))})))}},onLoadContacts:function(){return function(e,t){var n=E(t());n&&(e(J()),d.get("/contacts",b(n)).then((function(t){return e(K(t.data))})).catch((function(t){return e(X(t))})))}}},fe=Object(i.b)((function(e){return{contacts:W(e)}}),pe)(me),de=n(60),be=function(e){var t=e.value,n=e.onChangeFilter;return r.a.createElement("div",{className:de.filter},r.a.createElement("p",null,"Find contacts by name"),r.a.createElement("input",{type:"text",value:t,onChange:n,placeholder:"Enter name..."}))},he=Object(i.b)((function(e){return{value:Q(e)}}),(function(e){return{onChangeFilter:function(t){return e(re(t.target.value))}}}))(be),Ee=n(3),Oe=n(61),ve=function(e){var t=e.onSubmit,n=e.children;return r.a.createElement("form",{onSubmit:t,className:Oe.form},n)},ge=function(e){var t=e.title,n=e.handleChange,a=e.type,c=e.name,o=e.value,i=e.holder,u=e.id;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:u},t),r.a.createElement("input",{type:a,placeholder:i,value:o,onChange:n,name:c,id:u}))};ge.defaultProps={type:"text"};var je=ge,_e=n(62),Ce=function(e){var t=e.title;return r.a.createElement("button",{className:_e.button,type:"submit"},t)};Ce.defaultProps={title:"text"};var ye=Ce,Se=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(R.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",number:""},e.handleChange=function(t){e.setState(Object(Ee.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.onAddContact(Object(p.a)({},e.state)),e.setState({name:"",number:""})},e}return Object(L.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.number;return r.a.createElement(ve,{onSubmit:this.handleSubmit},r.a.createElement(je,{title:"Name",handleChange:this.handleChange,name:"name",holder:"Enter contact`s name",id:"name_input",value:t}),r.a.createElement(je,{title:"Number",handleChange:this.handleChange,type:"number",name:"number",holder:"Enter contact`s number",id:"number_input",value:n}),r.a.createElement(ye,{title:"Add contact"}))}}]),n}(a.Component),Ne=Object(i.b)(null,(function(e){return{onAddContact:function(t){return e($(t))}}}))(Se),Ae=Object(i.b)((function(e){return{count:z(e)}}),null)((function(e){var t=e.count;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{title:""},r.a.createElement(Ne,null)),r.a.createElement(U.a,{in:t>=2,timeout:500,classNames:q.a,unmountOnExit:!0},r.a.createElement(Y,{title:""},r.a.createElement(he,null))),r.a.createElement(Y,{title:""},r.a.createElement(fe,null)))})),Te=n(63),xe=n.n(Te),Re={borderRadius:"5%",border:"3px solid #000"},Le=function(){return r.a.createElement(Y,{title:""},r.a.createElement("h1",null,"Welcome to Phonebook"),r.a.createElement("img",{src:xe.a,style:Object(p.a)({},Re),alt:"cat",width:"400",height:"400"}))},we=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(R.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(Ee.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.onLogin(Object(p.a)({},e.state)),e.setState({email:"",password:""})},e}return Object(L.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return r.a.createElement(ve,{onSubmit:this.handleSubmit},r.a.createElement(je,{title:"Email",handleChange:this.handleChange,type:"email",name:"email",holder:"Enter your email",id:"email_input",value:t}),r.a.createElement(je,{title:"Password",handleChange:this.handleChange,type:"password",name:"password",holder:"Enter your password",id:"password_input",value:n}),r.a.createElement(ye,{title:"Login"}))}}]),n}(a.Component),ke=Object(i.b)(null,(function(e){return{onLogin:function(t){return e(function(e){return function(t){t(g()),d.post("/users/login",e).then((function(e){return t(j(e.data))})).catch((function(e){return t(_(e))}))}}(t))}}}))(we),Ue=function(e){var t=function(t){Object(w.a)(a,t);var n=Object(k.a)(a);function a(){return Object(R.a)(this,a),n.apply(this,arguments)}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.authenticated,n=e.history;t&&n.replace("/")}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.authenticated,n=e.history,a=e.location;t&&(a.state&&a.state.from?n.replace(a.state.from):n.replace("/"))}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),a}(a.Component);return Object(i.b)((function(e){return{authenticated:h(e)}}))(t)},De=Ue((function(){return r.a.createElement(Y,{title:""},r.a.createElement(ke,null))})),Fe=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(R.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",password:""},e.handleChange=function(t){e.setState(Object(Ee.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.onSignup(Object(p.a)({},e.state)),e.setState({name:"",email:"",password:""})},e}return Object(L.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.password;return r.a.createElement(ve,{onSubmit:this.handleSubmit},r.a.createElement(je,{title:"Name",handleChange:this.handleChange,name:"name",holder:"Enter your name",id:"name_input",value:t}),r.a.createElement(je,{title:"Email",handleChange:this.handleChange,type:"email",name:"email",holder:"Enter your email",id:"email_input",value:n}),r.a.createElement(je,{title:"Password",handleChange:this.handleChange,type:"password",name:"password",holder:"Enter your password",id:"password_input",value:a}),r.a.createElement(ye,{title:"Sign Up"}))}}]),n}(a.Component),Pe=Object(i.b)(null,(function(e){return{onSignup:function(t){return e(function(e){return function(t){t(C()),d.post("/users/signup",e).then((function(e){return t(y(e.data))})).catch((function(e){return t(S(e))}))}}(t))}}}))(Fe),He=Ue((function(){return r.a.createElement(Y,{title:""},r.a.createElement(Pe,null))})),Ie=n(67),qe=Object(i.b)((function(e){return{authenticated:h(e)}}))((function(e){var t=e.authenticated,n=e.redirectTo,a=void 0===n?"/":n,c=e.component,o=Object(Ie.a)(e,["authenticated","redirectTo","component"]);return r.a.createElement(l.b,Object.assign({},o,{render:function(e){return t?r.a.createElement(c,e):r.a.createElement(l.a,{to:{pathname:a,state:{from:e.location}}})}}))})),Be=n(17),Ge=n.n(Be),ze=n(64),Qe=n(19),We={color:"#0039d4",fontWeight:"bold"},Me=function(e){var t=e.auth;return r.a.createElement("nav",{className:Qe.navigation},r.a.createElement("ul",{className:Qe.list},r.a.createElement("li",{className:Qe.item},r.a.createElement(u.b,{to:"/",exact:!0,activeStyle:We,className:Qe.link},"Home")),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:Qe.item},r.a.createElement(u.b,{to:"/contacts",exact:!0,activeStyle:We,className:Qe.link},"Contacts"))),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:Qe.item},r.a.createElement(u.b,{to:"/login",exact:!0,activeStyle:We,className:Qe.link},"Login")),r.a.createElement("li",{className:Qe.item},r.a.createElement(u.b,{to:"/register",exact:!0,activeStyle:We,className:Qe.link},"Sign up")))))},Ye=n(28),Je=function(e){var t=e.user,n=e.onLogOut;return r.a.createElement("div",{className:Ye.profile},r.a.createElement("p",{className:Ye.p},t.email),r.a.createElement("button",{className:Ye.button,type:"button",onClick:n},"Log Out"))},Ke=function(e){var t=e.user,n=e.authenticated,a=e.onLogOut;return r.a.createElement("header",{className:ze.header},r.a.createElement(Me,{auth:n}),n&&r.a.createElement(Je,{user:t,onLogOut:a}))};Ke.defaultProps={user:Ge.a.shape({name:"name",email:"email"})};var Xe,$e,Ve,Ze,et,tt,nt=Ke,at={onLogOut:function(){return function(e,t){e(x());var n=E(t());n&&d.post("/users/logout",b(n))}}},rt=Object(i.b)((function(e){return{user:O(e),authenticated:h(e)}}),at)(nt),ct=n(65),ot=function(e){var t=e.message;return r.a.createElement("p",{className:ct.p},t,"!")},it=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(R.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={addTittle:!1},e}return Object(L.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.refreshUser)(),this.setState({addTittle:!0})}},{key:"render",value:function(){var e=this.state.addTittle,t=this.props.alert,n=!!t;return r.a.createElement("div",{className:F.a.container},r.a.createElement(U.a,{in:e,timeout:500,classNames:H.a,unmountOnExit:!0},r.a.createElement("h1",null,"Phonebook")),r.a.createElement(rt,null),r.a.createElement(l.d,null,r.a.createElement(qe,{path:"/contacts",component:Ae,redirectTo:"/login"}),r.a.createElement(l.b,{exact:!0,path:"/",component:Le}),r.a.createElement(l.b,{path:"/login",component:De}),r.a.createElement(l.b,{path:"/register",component:He}),r.a.createElement(l.a,{to:"/"})),r.a.createElement(U.a,{in:n,timeout:300,classNames:q.a,unmountOnExit:!0},r.a.createElement(ot,{message:t})))}}]),n}(a.Component),ut={refreshUser:function(){return function(e,t){e(N());var n=E(t());n&&d.get("/users/current",b(n)).then((function(t){return e(A(t.data))})).catch((function(t){return e(T(t))}))}}},lt=Object(i.b)((function(e){return{alert:m(e)}}),ut)(it),st=n(27),mt=n(36),pt=n(66),ft=n.n(pt),dt=n(8),bt=Object(v.c)([],(Xe={},Object(Ee.a)(Xe,K,(function(e,t){return t.payload.contacts})),Object(Ee.a)(Xe,Z,(function(e,t){return[].concat(Object(st.a)(e),[t.payload.contact])})),Object(Ee.a)(Xe,ne,(function(e,t){return e.filter((function(e){return e.id!==t.payload.id}))})),Object(Ee.a)(Xe,x,(function(){return[]})),Xe)),ht=Object(v.c)("",($e={},Object(Ee.a)($e,re,(function(e,t){return t.payload.filter})),Object(Ee.a)($e,ne,(function(){return""})),Object(Ee.a)($e,x,(function(){return""})),$e)),Et=Object(dt.c)({contacts:bt,filter:ht}),Ot=Object(v.b)("SHOWALERT",(function(e){return{payload:{message:e}}})),vt=Object(v.b)("HIDEALERT"),gt=Object(v.c)("",(Ve={},Object(Ee.a)(Ve,Ot,(function(e,t){return t.payload.message})),Object(Ee.a)(Ve,vt,(function(){return""})),Ve)),jt=Object(v.c)(null,(Ze={},Object(Ee.a)(Ze,j,(function(e,t){return t.payload.response.user})),Object(Ee.a)(Ze,y,(function(e,t){return t.payload.response.user})),Object(Ee.a)(Ze,A,(function(e,t){return t.payload.user})),Object(Ee.a)(Ze,x,(function(){return null})),Ze)),_t=Object(v.c)(!1,(et={},Object(Ee.a)(et,j,(function(){return!0})),Object(Ee.a)(et,y,(function(){return!0})),Object(Ee.a)(et,A,(function(){return!0})),Object(Ee.a)(et,x,(function(){return!1})),et)),Ct=Object(v.c)(null,(tt={},Object(Ee.a)(tt,j,(function(e,t){return t.payload.response.token})),Object(Ee.a)(tt,y,(function(e,t){return t.payload.response.token})),Object(Ee.a)(tt,x,(function(){return null})),tt)),yt=Object(dt.c)({user:jt,authenticated:_t,token:Ct}),St=n(29),Nt={name:"The name must contain only the letters a-z, A-C and a space, with length from 3 to 20 characters",number:"The number must contain only integers from 0-9, 10 characters long",notUnique:"Contact already exist!"},At="error",Tt="success",xt=new function e(t){var n=this;Object(R.a)(this,e),this.validate=function(e,t){var a=n.schema.validate(t),r=a.error,c=a.value;return r?n.errorTransform(r):n.checkUnique(e,t)?{message:Nt.notUnique,meta:At}:{contact:c,meta:Tt}},this.errorTransform=function(e){if("string.empty"===e.details[0].type)return{message:e.message,meta:At};var t=e.details[0].path[0];return{message:Nt[t],meta:At}},this.checkUnique=function(e,t){return e.some((function(e){return e.name.toLowerCase()===t.name.toLowerCase()}))},this.schema=t}(St.object({name:St.string().pattern(/^[a-zA-Z ]{3,20}$/).trim().required(),number:St.string().pattern(/^[0-9]{10}$/).required()})),Rt=function(e){return function(t){return function(n){if(n.meta&&n.meta.addContact){var a=e.getState(),r=G(a),c=n.payload.contact,o=xt.validate(r,c);o.meta===Tt&&e.dispatch(function(e){return function(t,n){var a=E(n());a&&(t(V()),d.post("/contacts",e,b(a)).then((function(e){return t(Z(e.data))})).catch((function(e){return t(ee(e))})))}}(o.contact));var i=o.message?o.message:"";return e.dispatch(Ot(i)),void setTimeout((function(){e.dispatch(vt())}),3e3)}t(n)}}},Lt=function(e){return function(t){return function(n){if(n.meta&&n.meta.error)return e.dispatch(Ot(n.payload.message)),void setTimeout((function(){e.dispatch(vt())}),3e3);t(n)}}},wt={key:"session",storage:ft.a,whitelist:["token"]},kt=Object(mt.a)(wt,yt),Ut=Object(v.a)({reducer:{contactsList:Et,alert:gt,session:kt},middleware:[].concat(Object(st.a)(Object(v.d)()),[Lt,Rt])}),Dt=Object(mt.b)(Ut),Ft=function(){return r.a.createElement(i.a,{store:Ut},r.a.createElement(s.a,{loading:null,persistor:Dt},r.a.createElement(u.a,null,r.a.createElement(l.b,{component:lt}))))};n(119);o.a.render(r.a.createElement(Ft,null),document.querySelector("#root"))},19:function(e,t,n){e.exports={navigation:"NavBar_navigation__224c5",list:"NavBar_list__3gaWA",item:"NavBar_item__2RAQQ",link:"NavBar_link__2Iixg"}},22:function(e,t,n){e.exports={list:"ContactsList_list__2RiYd",item:"ContactsList_item__2O7n3",wrap:"ContactsList_wrap__2wfAx"}},26:function(e,t,n){e.exports={enter:"pop_enter__1NM7x",enterActive:"pop_enterActive__1Bhql",exit:"pop_exit__1_phz",exitActive:"pop_exitActive__3xbz2"}},28:function(e,t,n){e.exports={profile:"UserProfile_profile__1Nk0d",p:"UserProfile_p__35jbH",button:"UserProfile_button__1EmYR"}},56:function(e,t,n){e.exports={container:"App_container__16xz_"}},57:function(e,t,n){e.exports={enter:"slide-500ms_enter__3KjJC",enterActive:"slide-500ms_enterActive__1PUSQ",exit:"slide-500ms_exit__Yd33a",exitActive:"slide-500ms_exitActive__3BQFL"}},58:function(e,t,n){e.exports={titleSection:"Section_titleSection__TWUIr"}},59:function(e,t,n){e.exports={enter:"slide_enter__BLs75",enterActive:"slide_enterActive__2XArv",exit:"slide_exit__2XvOt",exitActive:"slide_exitActive__3LNYO"}},60:function(e,t,n){e.exports={filter:"Filter_filter__1E5tH"}},61:function(e,t,n){e.exports={form:"Form_form__z9cgu"}},62:function(e,t,n){e.exports={button:"Button_button__1RwfN"}},63:function(e,t,n){e.exports=n.p+"static/media/cat.d8991c69.jpg"},64:function(e,t,n){e.exports={header:"Header_header__1VCKf"}},65:function(e,t,n){e.exports={p:"Alert_p__3pTNQ"}},69:function(e,t,n){e.exports=n(120)}},[[69,1,2]]]);
//# sourceMappingURL=main.0ac54562.chunk.js.map